global HPARAMS
HPARAMS = [
    {'kp_t', 100, 400};
    {'kd_t', 5, 50};
    {'kp_s', 100, 400};
    {'kd_s', 5, 50};
    {'sw_target', 5, 50};
    {'t_target', 5, 50};
];

% Run evolutive algorithm
min_values = cell2mat(HPARAMS(:, 2));
max_values = cell2mat(HPARAMS(:, 3));
ga_options = struct('MaxGenerations', 1);
optimals = ga(@fitness, size(HPARAMS, 1), [], [], [], [], min_values, max_values);
optimals


function val = fitness(chromosome)
    params.kp_t = val_by_id(chromosome, 'kp_t');
    params.kd_t = val_by_id(chromosome, 'kd_t');
    params.kp_s = val_by_id(chromosome, 'kp_s');
    params.kd_s = val_by_id(chromosome, 'kd_s');
    params.sw_target = val_by_id(chromosome, 'sw_target');
    params.t_target = val_by_id(chromosome, 't_target');
    params.alfa = val_by_id(chromosome, 'alfa');
    
    % Evaluate it here
    q = [0; 0; 0];
    dq = [0.1; 0; 0];
    params_opt = optimize(q, dq, params, h_param, range_1, steps, c_type);
    
    val = Kd_t;
end

function val = val_by_id(chromosome, id)
    global HPARAMS
    val = chromosome(strcmp(HPARAMS(:, 1), id));
end